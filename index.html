
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zentra DAO DApp</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
</head>
<body style="font-family:sans-serif;padding:2rem;background-color:#111;color:#eee">
  <h1>Zentra DAO í…ŒìŠ¤íŠ¸ DApp</h1>
  <div>
    <button onclick="connectWallet()">ğŸ”Œ ì§€ê°‘ ì—°ê²°</button>
    <div id="wallet">ì§€ê°‘ ìƒíƒœ: ì—°ê²°ë˜ì§€ ì•ŠìŒ</div>
  </div>

  <div style="margin-top:2rem">
    <h2>1ï¸âƒ£ ë¯¼íŒ…</h2>
    <input id="mintAmount" placeholder="ë¯¼íŒ… ìˆ˜ëŸ‰ (ZENTRA)" />
    <button onclick="mint()">Mint</button>
  </div>

  <div style="margin-top:2rem">
    <h2>2ï¸âƒ£ ìŠ¤í…Œì´í‚¹</h2>
    <input id="stakeAmount" placeholder="ìŠ¤í…Œì´í‚¹ ìˆ˜ëŸ‰" />
    <button onclick="stake()">Stake</button>
  </div>

  <div style="margin-top:2rem">
    <h2>3ï¸âƒ£ ì±„ê¶Œ êµ¬ë§¤</h2>
    <select id="bondType">
      <option value="0">ìœ ë™ì„± ì±„ê¶Œ</option>
      <option value="1">ìŠ¤í…Œì´ë¸” ì±„ê¶Œ</option>
    </select>
    <select id="bondDays">
      <option value="30">30ì¼</option>
      <option value="60">60ì¼</option>
      <option value="90">90ì¼</option>
      <option value="180">180ì¼</option>
      <option value="360">360ì¼</option>
    </select>
    <input id="bondAmount" placeholder="USDT ìˆ˜ëŸ‰" />
    <button onclick="buyBond()">Buy Bond</button>
  </div>

  <div style="margin-top:2rem">
    <h2>4ï¸âƒ£ ì±„ê¶Œ ìˆ˜ë ¹</h2>
    <input id="bondId" placeholder="ì±„ê¶Œ ID" />
    <button onclick="claimBond()">Claim</button>
  </div>

<script>
let provider, signer, contract;
const contractAddress = "0x570053837ced3c7e64006B8Cdd8E8468d186f049"; // ì‹¤ì œ ë°°í¬ëœ ZentraToken ì£¼ì†Œ
const abi = []; // ì‹¤ì œ ABI ì‚½ì… í•„ìš” (ìš”ì²­ì— ë”°ë¼ ëŒ€ì²´ ê°€ëŠ¥)

async function connectWallet() {
  if (!window.ethereum) {
    alert("MetaMask ë˜ëŠ” Web3 ì§€ê°‘ì´ ê°ì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
    return;
  }
  provider = new ethers.providers.Web3Provider(window.ethereum);
  await provider.send("eth_requestAccounts", []);
  signer = provider.getSigner();
  const user = await signer.getAddress();
  document.getElementById("wallet").innerText = "ì§€ê°‘: " + user;
  contract = new ethers.Contract(contractAddress, abi, signer);
}

async function mint() {
  const amt = document.getElementById("mintAmount").value;
  const tx = await contract.mintWithUSDT(await signer.getAddress(), ethers.utils.parseUnits(amt, 18));
  await tx.wait();
  alert("âœ… ë¯¼íŒ… ì™„ë£Œ");
}

async function stake() {
  const amt = document.getElementById("stakeAmount").value;
  const tx = await contract.stake(ethers.utils.parseUnits(amt, 18));
  await tx.wait();
  alert("âœ… ìŠ¤í…Œì´í‚¹ ì™„ë£Œ");
}

async function buyBond() {
  const type = document.getElementById("bondType").value;
  const days = document.getElementById("bondDays").value;
  const amt = document.getElementById("bondAmount").value;
  const tx = await contract.buyBond(type, days, ethers.utils.parseUnits(amt, 18));
  await tx.wait();
  alert("âœ… ì±„ê¶Œ êµ¬ë§¤ ì™„ë£Œ");
}

async function claimBond() {
  const id = document.getElementById("bondId").value;
  const tx = await contract.claimBond(id);
  await tx.wait();
  alert("âœ… ì±„ê¶Œ ìˆ˜ë ¹ ì™„ë£Œ");
}
</script>
</body>
</html>
